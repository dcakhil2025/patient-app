<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>East Point Hospital - Dashboard</title>
  <style>
    body{font-family:Arial;margin:0;background:#f4f6f8;}
    header{background:#004080;color:#fff;padding:14px 20px;display:flex;align-items:center;gap:16px;}
    header img{height:64px;}
    .container{max-width:1000px;margin:20px auto;padding:10px;}
    .btn{background:#0066cc;color:#fff;padding:8px 12px;border:none;border-radius:6px;cursor:pointer;margin-right:8px;}
    .card{background:#fff;padding:12px;border-radius:8px;border:1px solid #e0e0e0;margin-top:10px;display:flex;justify-content:space-between;align-items:center;}
    a { color: inherit; text-decoration: none; }
  </style>
</head>
<body>
<header>
  <img src="assets/logo.png" alt="logo">
  <div>
    <h1 style="margin:0;">EAST POINT HOSPITAL</h1>
    <div>Department of General Medicine</div>
  </div>
</header>
<div class="container">
  <div style="margin-bottom:10px;">
    <button class="btn" onclick="location.href='add.html'">âž• Add Patient</button>
    <button class="btn" onclick="if(confirm('Clear all local data?')){localStorage.removeItem('patients'); location.reload();}">ðŸ§¹ Clear All</button>
  </div>

  <h2>Patient Dashboard</h2>
  <div id="list"></div>
  <p style="color:#666;margin-top:12px;">Click a patient to open profile. Data is stored locally in your browser (localStorage).</p>
</div>
<script>
function loadPatients(){
  const pts = JSON.parse(localStorage.getItem('patients')||'[]');
  const list = document.getElementById('list');
  if(!pts.length){ list.innerHTML = '<i>No patients yet</i>'; return; }
  list.innerHTML = '';
  pts.forEach((p,i)=>{
    const div = document.createElement('div');
    div.className = 'card';
    div.innerHTML = `<div><b>${p.name}</b><div style="color:#555">${p.age} yrs â€¢ ${p.diagnosis||''}</div></div>
                     <div>
                       <button class="btn" onclick="openProfile(${i})">Open</button>
                       <button class="btn" onclick="deletePatient(event,${i})" style="background:#c0392b">Delete</button>
                     </div>`;
    list.appendChild(div);
  });
}
function openProfile(i){ location.href = 'patient.html?id='+i; }
function deletePatient(e,i){ e.stopPropagation(); if(!confirm('Delete patient?')) return; let pts=JSON.parse(localStorage.getItem('patients')||'[]'); pts.splice(i,1); localStorage.setItem('patients', JSON.stringify(pts)); loadPatients(); }
loadPatients();
</script>
</body>
</html>
